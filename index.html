<!DOCTYPE html>
<html lang="en" ng-app>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.png">

    <title>Langeland</title>

    <link href="/assets/lib/leaflet/leaflet.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/langeland.css" rel="stylesheet">
    <link href="css/frontbox.css" rel="stylesheet">


  </head>
<body>

    <script src="/assets/lib/jquery/jquery-2.1.1.min.js"></script>
    <script src="/assets/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="/assets/lib/leaflet/leaflet.js"></script>
    <script src="/assets/common/langeland/statusBar.js"></script>
    <script src="/assets/common/langeland/TemporalColor.js"></script>
    <script src="/assets/common/mapApps/langeland.js"></script>


	
	<!-- The navigation bar -->
	
	<div class="navbar-default navbar-fixed-top" id="navbar">

		
			<a class="navbar-brand" href="#">Langeland Skisenter</a>

				<ul class="nav navbar-nav">

					<li><a href="#home">HEIM</a></li>
					<li><a href="#tracks">LØYPER</a></li>
					<li><a href="#camera">KAMERA</a></li>
					<li><a href="#contact">KONTAKT</a></li>

				</ul>
				
	</div>

	
	
	<!-- The home div: Front page image and information boxes -->

	<div id="home">

		<div class="fullscreen-cont">
			<div class="fullscreen-img"></div>

			<div class="container">
				<div class="content" id="#front">

					<div class="col-lg-8">

						<div class="frontbox-large" id="sistenytt">

							<div class="frontbox-large-header"><h4>SISTE NYTT</h4></div>

							<div class="frontbox-large-content">
								<h1>Status snøproduksjon</h1>
								<p>Anlegget har vore i drift sidan kl 16 i dag (frose vassinntak hindra tidlegare start), men med dårleg resultat; mest sørpe og vatn, og lite snø. Anlegget vart stoppa no kl 2030. Då var det 5 minus, og utsikter til stigande temperatur. Det må vere 8-10 minus skal anlegget gi noko fornuftig resultat. I tillegg til stigande temperatur er det venta mykje vind, så vi lyt berre avvente. Det skal ikkje vere enkelt denne vinteren....På Sørlandet er det venta 1,5 m snø; kunne nokon ordne med litt fordeling!</p>
							</div>
							
						</div>

					</div>

					<div class="col-lg-1"></div>
					
					<div class="col-lg-3">
						<a href="#loyper">
							<div class="frontbox-small" id="loyperheim">
								<div class="frontbox-small-header">
									<h5>LØYPER</h5>
								</div>
								<div class="frontbox-small-content">
									<p>Køyrd opp i dag!</p>
								</div>
							</div>
						</a>
						
						<a href="#ver">
							<div class="frontbox-small" id="verheim">
								<div class="frontbox-small-header">
									<h5>VERET</h5>
								</div>
								<div class="frontbox-small-content">	
									<p>Sjekk veret her</p>
								</div>

							</div>
						</a>
						<a href="#kamera">
							<div class="frontbox-small" id="kameraheim">
								<div class="frontbox-small-header">
									<h5>KAMERA</h5>
								</div>
								<div class="frontbox-small-content">
									<p>Sjå forholda på Langeland stadion</p>
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="loyper">
	
	<div class="row">
	<div class="col-lg-2">

		 <table class="table">
        <thead>
          <tr>
            <th>Løype</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="trackbody">
         
        </tbody>
      </table>

	</div>
	<div class="col-lg-10">
		<div id="map"></div>
</div>
	
	
</div>

	<!-- CAMERA SECTION -->
		
    <div id="kamera">

		<div id="kamera-content">

			<div class="col-md-2"
			  <p class="lead">Kameraet er plassert på skihytta og vender ut mot skistadion. Tenesta er levert av Firda og Enivest.</p>
			</div>
			<div class="col-md-10">
			  <img class="image img-responsive" src="http://37.44.172.66/axis-cgi/jpg/image.cgi?resolution=1024x768" alt="Generic placeholder image">
			</div>
		</div>

	</div>

	<!-- SPONSORS -->
	<div class="row" id="sponsor">
		<div class="centercontent">

			<div class="col-lg-2"></div>
			
			<div class="col-lg-4">
				<img class="image img-responsive" src="img/enivest2.png"></img>
			</div>

			<div class="col-lg-4">
				<img class="image img-responsive" src="img/gsport.jpg"></img>
			</div>

			<div class="col-lg-2"></div>
		</div>
	</div>




    </div><!-- /.container -->
</div>



    <div class="footer">
		<div class="container">

			<div class="col-md-4" id="kontakt">
					<h4>KONTAKTINFO</h4>

					<h4>Epost</h4>
					<p>kontakt@langelandskisenter.no</p>

					<h4>Kontaktperson</h4>

					<p>Kjetil Bjørset</p>
					<p>91312250</p>
			</div>

			<div class="col-md-4" id="sosialmedia">
				<h4>SOSIALE MEDIA</h4>
				<p>Du kan også finne oss på Google+ og Facebook<p>
			</div>

			<div class="col-md-4" id="test">

			</div>

		</div>
    </div>



  <script>


	$(window).ready(function() {

		var contentwidth = $('#heim').width();
		if ((contentwidth) < 720){
			$('.fullscreen-img').css('background', 'color: #444444');
		} else if ((contentwidth) < 996){
			$('.fullscreen-img').css('background', 'url(img/bglang-996.jpg)');
		}
	});

	$(window).resize(function () {
		var h = $(window).height(),
			offsetTop = 55; // Calculate the top offset
		var top = $("#top").height();
		$("#map").css('height', $(window).height()-offsetTop);
	}).resize();
	
	temporalColor.init();
	lang.init('#map', temporalColor);
	
	

	$.getJSON('/datapi/langeland/spatiotemporal', function (data) {
	var time = new Date();
		lang.addSegments(JSON.parse(data));
		console.log(new Date() - time);
		loadTrackData();
	});
	
	
	function loadTrackData() {
	
		$.getJSON('/data/langeland/trackobjects', function (data) {
			
			for (var i=0; i<data.length; i++) {
				lang.addTrackObjects(JSON.parse(data[i]));
			}
			populateList(lang.getTracks());
		
		});
	
	}
	
	
	/*
	
	Frontend thingies
	
	*/
		
	$("#trackbody").on('mouseover', 'tr', function () {
		lang.highlightTrack(this.id.substr(4));
	});

	$("#trackbody").on('mouseout', 'tr', function () {
		lang.resetAllStyles();
	});
			
	function populateList(trackList) {
		console.log(trackList);
		trackList.sort(function(a,b) {return a.trackLength - b.trackLength});
	
		for (var i=0; i<trackList.length; i++) {
			$("#trackbody").append(buildStatusBar(trackList[i]));
		
		
		}
	}
	


</script>


</body>
</html>
	
